<%= content_tag :span,
  class: "project_wrapper button #{@doc.sourceid}",
  'data-annotations-count' => annotations_count_helper(selector_project, @doc, @span),
  'data-project-name' => selector_project.name do -%>
  <%=
    if params[:divid]
      if params[:begin]
        link_to selector_project.name, span_show_project_sourcedb_sourceid_divs_docs_path(selector_project.name, params[:sourcedb], params[:sourceid], params[:divid], params[:begin], params[:end])
      else
        link_to selector_project.name, show_project_sourcedb_sourceid_divs_docs_path(selector_project.name, params[:sourcedb], params[:sourceid], params[:divid])
      end
    else
      if params[:begin]
        link_to selector_project.name, span_show_project_sourcedb_sourceid_docs_path(selector_project.name, params[:sourcedb], params[:sourceid], params[:begin], params[:end])
      else
        link_to selector_project.name, show_project_sourcedb_sourceid_docs_path(selector_project.name, params[:sourcedb], params[:sourceid])
      end
    end
  -%>
  <%= "(#{ annotations_count_helper(selector_project, @doc, @span) })" -%>
  <%= content_tag :span, 
    id: "project-selector-#{selector_project.name}", 
    class: 'project_selector project-textae-selector', 
    'data-project-url' => project_path(selector_project.name), 
    'data-project-name' => selector_project.name, 
    'data-project-id' => selector_project.id, 
    'data-annotations-json-url' => "#{ annotations_json_path }" do -%>
    <i class="fa <%= project_selector_icon local_assigns[:selected] -%>" aria-hidden="true"></i>
  <% end -%>
<% end -%>
