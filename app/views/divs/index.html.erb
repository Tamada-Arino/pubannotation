<% content_for :path do %>
  > <%= link_to t('views.paths.home'), home_path %>
  <% if @project_name %>
    > <%= link_to "projects", projects_path %>
    > <%= link_to @project_name, project_path(@project_name) %>
    > <%= link_to t('views.shared.pmcdocs'), project_pmcdocs_path(@project_name) %>
  <% else %>
    > <%= link_to t('views.shared.pmcdocs'), pmcdocs_path %>
  <% end %>
  > <%= @docs.first.sourceid %>
  > <%= t('views.shared.divs') %>
<% end %>

<h1>
	<%= t('views.divs.document_divs', :sourcedb => @docs.first.sourcedb, :sourceid => @docs.first.sourceid).html_safe %>
</h1>

<table>
  <tr>
    <th><%= t('activerecord.attributes.doc.sourcedb')%></th>
    <th><%= t('activerecord.attributes.doc.sourceid')%></th>
    <th><%= t('views.divs.div')%></th>
    <th><%= t('activerecord.attributes.doc.section') %></th>
    <th><%= t('activerecord.attributes.doc.body') %></th>
    <th><%= t('views.shared.size') %></th>
    <th></th>
  </tr>

<% @docs.each_with_index do |doc, i| %>
  <tr>
    <td style="text-align:center"><%= doc.sourcedb %></td>
    <td style="text-align:center"><a href="<%= doc.source %>"><%= doc.sourceid %></a></td>
    <td style="text-align:center"><%= doc.serial %></td>
    <td style="text-align:center"><%= doc.section %></td>
    <td style="text-align:left"><%= (doc.body.length < 42)? doc.body : doc.body[0, 40] + ' ...' %></td>
    <% if doc.body.length > 5000 %>
      <td style="text-align:right;color:red"><%= doc.body.length %></td>
    <% else %>    
      <td style="text-align:right"><%= doc.body.length %></td>
    <% end %>
    <% if @project_name %>
    <td><%= link_to t('views.shared.show'), project_pmcdoc_div_path(@project_name, doc.sourceid, doc.serial) %></td>
    <% else %>    
    <td><%= link_to t('views.shared.show'), pmcdoc_div_path(doc.sourceid, doc.serial) %></td>
    <% end %>
  </tr>
<% end %>
</table>
