<% content_for :path do %>
  > <%= link_to "home", home_path %>
  <% if @sourcedb == 'PubMed' %>
    > <%= link_to "pmdocs", pmdocs_path %>
    > <%= link_to @sourceid, pmdoc_path(@sourceid) %>
  <% elsif @sourcedb == 'PMC' %>
    > <%= link_to "pmcdocs", pmcdocs_path %>
    > <%= link_to @sourceid, pmcdoc_path(@sourceid) %>
    > <%= link_to "divs",    pmcdoc_divs_path(@sourceid) %>
    > <%= link_to @serial,   pmcdoc_div_path(@sourceid, @serial) %>
  <% end %>
  > annsets
<% end %>

<h1>
  Annotation sets
  <% if @sourcedb == 'PubMed' %>
    <span class='meta'>
    made to <span class='pname'><%= @sourcedb %>:<%= @sourceid %></span>
    </span>
  <% elsif @sourcedb == 'PMC' %>
    <span class='meta'>
    made to <%= @serial %>'th divition of <span class='pname'><%= @sourcedb %>:<%= @sourceid %></span>
    </span>
  <% else %>
    <span class='meta'>
    stored in PubAnnotation
    </span>
  <% end %>  
</h1>

<% if @annsets.empty? %>
  <p>none</p>
<% else %>
  <table>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Author</th>
      <th></th>
    </tr>

  <% @annsets.each do |annset| %>
    <tr>
      <td><%= annset.name %></td>
      <td class="text"><%= (annset.description.length < 64)? annset.description : annset.description[0, 62] + ' ...' %></td>
      <td><%= annset.author %></td>
      <% if @sourcedb == "PubMed" %>
        <td><%= link_to 'Show', pmdoc_annset_path(@sourceid, annset.name) %></td>
      <% elsif @sourcedb == "PMC" %>
        <td><%= link_to 'Show', pmcdoc_div_annset_path(@sourceid, @serial, annset.name) %></td>
      <% else %>
        <td><%= link_to 'Show', annset_path(annset.name) %></td>
      <% end %>
    </tr>
  <% end %>
  </table>
<% end %>

<% if user_signed_in? %>
<span class="button"><%= link_to 'Create new annotation set', new_annset_path %></span>
<% end %>

