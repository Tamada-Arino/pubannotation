<% content_for :path do %>
	> <%= link_to t('views.paths.home'), home_path %>
	<% if @doc and @doc.sourcedb == 'PubMed' %>
		> <%= link_to t('views.shared.pmdocs'), pmdocs_path %>
		> <%= link_to @doc.sourceid, pmdoc_path(@doc.sourceid) %>
	 	> <%= link_to t('activerecord.models.project').pluralize, pmdoc_projects_path(@doc.sourceid) %>
	<% elsif @doc and @doc.sourcedb == 'PMC' %>
		> <%= link_to t('views.shared.pmcdocs'), pmcdocs_path %>
		> <%= link_to @doc.sourceid, pmcdoc_path(@doc.sourceid) %>
		> <%= link_to t('views.shared.divs'), pmcdoc_divs_path(@doc.sourceid) %>
		> <%= link_to @doc.serial, pmcdoc_div_path(@doc.sourceid, @doc.serial) %>
	 	> <%= link_to t('activerecord.models.project').pluralize, pmcdoc_div_projects_path(@doc.sourceid, @doc.serial) %>
	<% else %>
 		> <%= link_to t('activerecord.models.project').pluralize, projects_path %>
 	<% end %>
 	> <%= @project.name %>
<% end %>

<%= render :partial => 'title_and_links' -%>

<fieldset class="pane description">
<legend>Description</legend>
<% if @project.description.present? -%>
	<div><%= @project.description.html_safe %></div>
<% end -%>
<br/>

<table>
	<tr>
		<th><%= t('activerecord.attributes.project.status') %></th>
		<td><%= @project.status_text -%></td>
	</tr>
	<tr>
		<th><%= t('activerecord.attributes.project.maintainer') %></th>
		<td><%= @project.user.username %></td>
	</tr>
	<tr>
		<th><%= t('activerecord.attributes.project.author') %></th>
		<td><%= @project.author %></td>
	</tr>
	<tr>
		<th><%= t('activerecord.attributes.project.license') %></th>
		<td><%= license_display_helper(@project.license).html_safe %></td>
	</tr>
</table>
<% if user_signed_in? -%>
	<% if @project.updatable_for?(current_user) -%>
		<% edit_path = edit_project_path(@project.name) -%> <span class="button"> <%= link_to t('views.shared.edit'), edit_path, :class => 'capitalize_first' -%> </span>
	<% end -%>

	<% if @project.destroyable_for?(current_user) -%> 
		<span class="button"><%= link_to t('views.shared.delete'), @project.name, :method => :delete, :confirm => t('views.projects.confirm_delete') %></span>
	<% end -%>
<% end %>
</fieldset>

<% if @project.sample.present? -%>
	<fieldset class="pane sample">
	<legend>Sample</legend>
		<%= render :partial => 'shared/textae_css_js'-%>
		<div class="textae-editor" style="border-style:none; background-color:white" source="<%= @project.sample -%>"></div>
	</fieldset>
<% end -%>

<fieldset class="pane documents">
<legend>
	<%= t('activerecord.models.doc').pluralize.capitalize %> <span class="info" style="margin-right:10px">(<%= total_number(@docs) -%>)</span>
</legend>

<h3>
<% if total_number(@docs) < 10000 -%>
	<%= link_to 'List all >', project_docs_path(@project.name) -%>
<% else -%>
	<span class="button_disabled" title="disabled due to too many documents to list">List all</span>
<% end -%>
</h3>

<h3>Search</h3>
<%= render partial: 'docs/search_form' -%>

<% if user_signed_in? && @project.present? && current_user == @project.user %>
	<h3><%= t('views.shared.add') -%></h3>
    <%= render :partial => "docs/project_form", :locals => {:model => @project} if @project.present? -%>

    <h3><%= link_to 'Create a new document >', new_project_doc_path(@project.name) -%></h3>

	<%= render partial: 'delete_docs' -%>
<% end -%>

</fieldset>

<fieldset class="pane annotations">
<legend>
Annotations <span class='info'>(<%= annotations_count_helper(@project) %>)</span>
</legend>

<% if @project.annotations_zip_downloadable == true -%>
	<h3>Batch download</h3>
	<div>
		<%= project_annotations_zip_link_helper(@project) -%>
	</div>
<% end %>

<!-- <div>
	<%= project_annotations_rdf_link_helper(@project) -%>
</div>
 -->
<% if user_signed_in? && @project.updatable_for?(current_user) -%>
	<%= render partial: 'annotations/upload_zip' -%>
	<%= render partial: 'obtain_annotations' -%>
	<%= render partial: 'delete_annotations' -%>
<% end -%>
</fieldset>